#!/bin/sh

#
# MailNotify
#

#=================================================================#
# variable
#=================================================================#

SUBJECT='死活監視通知'
TO_ADDR='k.ishida@mail.hisashi.work'

#=================================================================#
# functions
#=================================================================#

_chk_ping() {
    target_name=$1
    target=$2
    result=`ping -w 1 $target 2>&1 | awk 'NR==5'`

    if [ -z "$result" ]; then
        echo "ping $target_name($target) ERROR!" | mail -s $SUBJECT $TO_ADDR
    fi
}

#=================================================================#
# main
#=================================================================#

_chk_ping 'TEst' 192.168.11.1
_chk_ping 'InterNet' 8.8.8.8
